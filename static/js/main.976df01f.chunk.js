(this["webpackJsonpodin-library"]=this["webpackJsonpodin-library"]||[]).push([[0],{10:function(e,t,c){},17:function(e,t,c){},19:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),i=c(11),a=c.n(i),r=(c(17),c(2)),l=c(3),o=c(0),d={title:"Letters from a Stoic",author:"Seneca",isRead:!0,isOwned:!0},u={title:"The Odyssey",author:"Homer",isRead:!1,isOwned:!0},b={title:"The Prince",author:"Niccolo Machiavelli",isRead:!0,isOwned:!0},j=Object(n.createContext)(),h={title:"",author:"",isRead:!1,isOwned:!1};function O(){return Object(n.useContext)(j)}function x(e){var t=e.children,c=Object(n.useState)((function(){return[d,u,b]})),s=Object(l.a)(c,2),i=s[0],a=s[1],r=Object(n.useState)((function(){return{bookIndex:-1,bookState:h}})),O=Object(l.a)(r,2),x=O[0],m=O[1],f=Object(n.useMemo)((function(){return{myLibrary:i,editBook:x,setMyLibrary:a,setEditBook:m}}),[i,x]);return Object(o.jsx)(j.Provider,{value:f,children:t})}c(9),c(10);var m={TITLE:"Title",AUTHOR:"Author",PROGRESS:"Progress",STATUS:"Status"};var f=function(){var e=O(),t=e.myLibrary,c=e.setEditBook,s=Object(n.useState)((function(){return null})),i=Object(l.a)(s,2),a=i[0],d=i[1];Object(n.useEffect)((function(){c((function(){return{bookIndex:-1,bookState:h}})),d((function(){return null}))}),[t,c]);var u=Object(n.useCallback)((function(e){d((function(){return e})),c((function(){return{bookIndex:e,bookState:Object(r.a)({},t[e])}}))}),[t]);return Object(o.jsxs)("table",{className:"table is-fullwidth is-hoverable",children:[Object(o.jsx)("thead",{children:Object(o.jsx)("tr",{children:Object.values(m).map((function(e){return Object(o.jsx)("th",{className:"desktop",children:e},e)}))})}),Object(o.jsx)("tbody",{children:t.map((function(e,t){var c=e.title,n=e.author,s=e.isRead,i=e.isOwned;return Object(o.jsxs)("tr",{className:a===t?"is-selected":null,onDoubleClick:function(){return u(t)},children:[Object(o.jsx)("td",{className:"mobile-flex","data-header":m.TITLE,children:c}),Object(o.jsx)("td",{className:"mobile-flex","data-header":m.AUTHOR,children:n}),Object(o.jsx)("td",{className:"mobile-flex","data-header":m.PROGRESS,children:s?"Read":"Unread"}),Object(o.jsx)("td",{className:"mobile-flex","data-header":m.STATUS,children:i?"Acquired":"Lacking"})]},c)}))})]})},v=c(4),N=c(7);var p=function(){var e=O(),t=e.myLibrary,c=e.setMyLibrary,s=e.editBook,i=Object(n.useState)((function(){return h})),a=Object(l.a)(i,2),d=a[0],u=a[1],b=Object(n.useRef)({}),j=function(){var e=b.current.title;!function(e){return t.findIndex((function(t,c){return t.title.toLowerCase()===e&&c!==s.bookIndex}))>=0}(d.title.toLowerCase())?e.setCustomValidity(""):b.current.title.setCustomValidity("Title already exists")};Object(n.useEffect)((function(){return j()}),[d.title]),Object(n.useEffect)((function(){s.bookIndex<0?(u((function(){return h})),Object.values(b.current).forEach((function(e){e.selectedIndex="-1"}))):(u((function(){return s.bookState})),function(){for(var e=arguments.length,t=new Array(e),c=0;c<e;c++)t[c]=arguments[c];Object.values(b.current).forEach((function(e,c){e.selectedIndex=t[c]?"0":"1"}))}(s.bookState.isRead,s.bookState.isOwned))}),[t,s]);var x=Object(n.useCallback)((function(e){u((function(t){return Object(r.a)(Object(r.a)({},t),{},Object(v.a)({},e.target.name,e.target.value))}))}),[]),m=Object(n.useCallback)((function(e){u((function(t){return Object(r.a)(Object(r.a)({},t),{},Object(v.a)({},e.target.name,"true"===e.target.value))}))}),[]);return Object(o.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),-1===s.bookIndex)c((function(e){return[d].concat(Object(N.a)(e))}));else{var n=Object(N.a)(t);n[s.bookIndex]=Object(r.a)({},d),c((function(){return Object(N.a)(n)}))}},children:[Object(o.jsxs)("div",{className:"columns",children:[Object(o.jsx)("div",{className:"column is-4",children:Object(o.jsxs)("div",{className:"field",children:[Object(o.jsx)("label",{className:"label",htmlFor:"inputTitle",children:"Title"}),Object(o.jsx)("div",{className:"control",children:Object(o.jsx)("input",{ref:function(e){b.current.title=e},className:"input",type:"text",id:"inputTitle",placeholder:"Book",name:"title",value:d.title,onChange:x,required:!0})})]})}),Object(o.jsx)("div",{className:"column is-4",children:Object(o.jsxs)("div",{className:"field",children:[Object(o.jsx)("label",{className:"label",htmlFor:"inputAuthor",children:"Author"}),Object(o.jsx)("div",{className:"control",children:Object(o.jsx)("input",{className:"input",type:"text",id:"inputAuthor",placeholder:"Name",name:"author",value:d.author,onChange:x,required:!0})})]})}),Object(o.jsx)("div",{className:"column",children:Object(o.jsxs)("div",{className:"field",children:[Object(o.jsx)("label",{className:"label",htmlFor:"selectProgress",children:"Progress"}),Object(o.jsx)("div",{className:"control",children:Object(o.jsx)("div",{className:"select",children:Object(o.jsxs)("select",{ref:function(e){b.current.progress=e},id:"selectProgress",defaultValue:null,name:"isRead",onChange:m,required:!0,children:[Object(o.jsx)("option",{value:!0,children:"Read"}),Object(o.jsx)("option",{value:!1,children:"Unread"})]})})})]})}),Object(o.jsx)("div",{className:"column is-2",children:Object(o.jsxs)("div",{className:"field",children:[Object(o.jsx)("label",{className:"label",htmlFor:"selectStatus",children:"Status"}),Object(o.jsx)("div",{className:"control",children:Object(o.jsx)("div",{className:"select",children:Object(o.jsxs)("select",{ref:function(e){b.current.status=e},id:"selectStatus",defaultValue:null,name:"isOwned",onChange:m,required:!0,children:[Object(o.jsx)("option",{value:!0,children:"Acquired"}),Object(o.jsx)("option",{value:!1,children:"Lacking"})]})})})]})})]}),Object(o.jsx)("div",{className:"mobile-flex-button",children:Object(o.jsx)("button",{className:"button is-link is-outlined is-inverted has-text-weight-semibold",type:"submit",children:"Submit"})})]})},k=c(12);function y(){return Object(o.jsx)("footer",{className:"is-flex is-justify-content-center",children:Object(o.jsx)("a",{href:"https://github.com/anon-legion",target:"_blank",rel:"noopener noreferrer nofollow",children:Object(o.jsxs)("p",{className:"is-clickable is-size-5 has-text-grey-dark",children:["Copyright \xa9 2021 =GV=",Object(o.jsx)("span",{className:"icon-text",children:Object(o.jsx)("span",{className:"icon is-medium has-text-grey-dark",children:Object(o.jsx)(k.a,{})})})]})})})}var g=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("header",{className:"hero",children:Object(o.jsxs)("div",{className:"hero-body has-text-centered py-5",children:[Object(o.jsx)("h1",{className:"title is-1 is-size-3-mobile has-text-primary",children:"Odin Book Library"}),Object(o.jsx)("p",{className:"subtitle is-2 is-size-4-mobile has-text-white-ter",children:"My personal book collection"})]})}),Object(o.jsx)("main",{className:"section is-flex is-flex-direction-column is-justify-content-space-between pt-4",children:Object(o.jsxs)(x,{children:[Object(o.jsx)("div",{className:"container",children:Object(o.jsx)("div",{className:"box has-background-info",children:Object(o.jsx)(f,{})})}),Object(o.jsxs)("div",{className:"container mt-4",children:[Object(o.jsx)("span",{className:"is-size-5 is-size-6-mobile has-text-white-ter",children:"Add/Edit Book (double click row to edit)"}),Object(o.jsx)("div",{className:"box has-background-info",children:Object(o.jsx)(p,{})})]})]})}),Object(o.jsx)(y,{})]})};a.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(g,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.976df01f.chunk.js.map